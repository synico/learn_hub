## 线程安全

### 线程安全的定义
当多个线程访问某个类的实例时，不管运行环境采用何种调度方式或这些线程将如何交替运行，并且在主调代码中不需要任何额外的同步或协同，这个类的实例能表现出正确的行为，那么这个类是线程安全的。
***

### 线程封闭
#### ad_hoc线程封闭
维护线程封闭性的职责完全由程序实现来负责。
#### 栈封闭
线程封闭的特例。通过局部变量访问对象。
#### ThreadLocal类
特定线程的值在加入ThreadLocal时被发布到特定的线程上。当线程终止后，通过WeakReference保存在ThreadLocal.ThreadLocalMap上的特定值和引用会被垃圾回收。
